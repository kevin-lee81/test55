<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>제이허브 - 주문제작형 카드제조 전문 업체</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <!-- jQuery 라이브러리 추가 -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- 다음 주소 API -->
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
  <!-- 헤더 영역 -->
  <header>
    <div class="container header-container">
      <a href="./index.html" class="logo">제이허브</a>
      <nav>
        <ul class="nav-menu">
          <li><a href="#about">회사소개</a></li>
          <li><a href="#products">제품안내</a></li>
          <li><a href="#order">주문하기</a></li>
          <li><a href="#contact">고객센터</a></li>
        </ul>
      </nav>
      <div class="auth-buttons" id="auth-buttons">
        <a href="#" class="btn btn-outline" id="login-btn" onclick="toggleLoginModal()">로그인</a>
        <a href="#" class="btn" id="register-btn" onclick="toggleRegisterModal()">회원가입</a>
      </div>
      <button class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </header>

  <!-- 메인 영역 -->
  <main>
    <!-- 히어로 섹션 -->
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h1>맞춤형 카드 제작의 <span>새로운 기준</span></h1>
          <p>고객의 요구에 맞는 최고 품질의 카드를 제작해 드립니다.<br>PVC, RFID, PET 등 다양한 소재와 디자인으로 비즈니스에 가치를 더하세요.</p>
          <div class="hero-buttons">
            <a href="#order" class="btn btn-lg">지금 주문하기</a>
            <a href="#products" class="btn btn-outline btn-lg">제품 살펴보기</a>
          </div>
        </div>
        <div class="hero-image">
          <img src="https://via.placeholder.com/600x400" alt="카드 이미지">
        </div>
      </div>
    </section>

    <!-- 제품 섹션 -->
    <section id="products" class="products section">
      <div class="container">
        <div class="section-header">
          <h2>다양한 제품 라인업</h2>
          <p>고객의 니즈에 맞는 다양한 카드 제품을 제공합니다</p>
        </div>
        <div class="product-grid">
          <div class="product-card">
            <div class="product-image">
              <img src="https://via.placeholder.com/300x200" alt="PVC 카드">
            </div>
            <div class="product-info">
              <h3>PVC 카드</h3>
              <p>내구성이 뛰어난 화이트 PVC 카드</p>
              <a href="#order" class="btn btn-sm">주문하기</a>
            </div>
          </div>
          <div class="product-card">
            <div class="product-image">
              <img src="https://via.placeholder.com/300x200" alt="RFID 카드">
            </div>
            <div class="product-info">
              <h3>RFID 카드</h3>
              <p>MF13.56, EM125 등 다양한 RFID 카드</p>
              <a href="#order" class="btn btn-sm">주문하기</a>
            </div>
          </div>
          <div class="product-card">
            <div class="product-image">
              <img src="https://via.placeholder.com/300x200" alt="PET 카드">
            </div>
            <div class="product-info">
              <h3>PET 카드</h3>
              <p>화이트, 골드, 실버, 골드펄, 실버펄, 투명 등 다양한 PET 카드</p>
              <a href="#order" class="btn btn-sm">주문하기</a>
            </div>
          </div>
          <div class="product-card">
            <div class="product-image">
              <img src="https://via.placeholder.com/300x200" alt="돋보기 카드">
            </div>
            <div class="product-info">
              <h3>돋보기 카드</h3>
              <p>가로(소), 가로(대), 세로(소), 세로(대) 등 다양한 돋보기 카드</p>
              <a href="#order" class="btn btn-sm">주문하기</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 주문 섹션 -->
    <section id="order" class="order section">
      <div class="container">
        <div class="section-header">
          <h2>주문하기</h2>
          <p>원하시는 제품을 선택하고 주문해보세요</p>
        </div>
        <div class="order-form-container">
          <!-- 로그인 상태에 따라 다른 내용 표시 -->
          <div id="order-login-required" class="text-center">
            <p>주문하기 기능을 이용하시려면 로그인이 필요합니다.</p>
            <div class="mt-4">
              <button class="btn" onclick="toggleLoginModal()">로그인하기</button>
              <button class="btn btn-outline ml-3" onclick="toggleRegisterModal()">회원가입하기</button>
            </div>
          </div>
          
          <!-- 로그인 후 표시될 주문 폼 -->
          <form id="order-form" class="hidden" action="#" method="post">
            <!-- 재질 선택 -->
            <div class="form-group">
              <label for="material">재질</label>
              <select id="material" name="material" onchange="updateOptions()" required>
                <option value="" disabled selected>재질을 선택하세요</option>
                <option value="pvc">PVC카드</option>
                <option value="rf">RF카드</option>
              </select>
            </div>
            
            <!-- 옵션 선택 (재질에 따라 동적으로 변경) -->
            <div class="form-group">
              <label for="option">옵션</label>
              <select id="option" name="option" required>
                <option value="" disabled selected>옵션을 선택하세요</option>
                <!-- 옵션은 자바스크립트로 동적 생성 -->
              </select>
            </div>
            
            <!-- 사이즈 선택 -->
            <div class="form-group">
              <label for="size">사이즈</label>
              <select id="size" name="size" onchange="toggleCustomSize()" required>
                <option value="" disabled selected>사이즈를 선택하세요</option>
                <option value="standard">86*54mm (표준)</option>
                <option value="custom">비규격</option>
              </select>
            </div>
            
            <!-- 비규격 사이즈 입력 (사이즈가 비규격일 때만 표시) -->
            <div class="form-group hidden" id="custom-size-group">
              <label for="custom-size">비규격 사이즈 입력</label>
              <input type="text" id="custom-size" name="custom-size" placeholder="예: 90*60mm">
            </div>
            
            <!-- 수량 -->
            <div class="form-group">
              <label for="quantity">수량</label>
              <input type="number" id="quantity" name="quantity" min="1" required>
            </div>
            
            <!-- 후가공 -->
            <div class="form-group">
              <label>후가공</label>
              <div class="checkbox-group">
                <label class="checkbox-container">
                  <input type="checkbox" name="post-process" value="numbering">
                  <span class="checkbox-label">넘버링(바코드, QR 등)</span>
                </label>
                <label class="checkbox-container">
                  <input type="checkbox" name="post-process" value="punching">
                  <span class="checkbox-label">타공</span>
                </label>
              </div>
            </div>
            
            <!-- 요청사항 -->
            <div class="form-group">
              <label for="request">요청사항</label>
              <textarea id="request" name="request" rows="4" placeholder="추가 요청사항이 있으시면 입력해주세요."></textarea>
            </div>
            
            <!-- 파일 업로드 -->
            <div class="form-group">
              <label>파일 업로드</label>
              <button type="button" class="btn btn-outline file-upload-btn" onclick="openGoogleForm()">파일 업로드하기</button>
              <p class="form-help">* 구글 폼을 통해 파일을 업로드합니다.</p>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn btn-lg">주문 제출하기</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- 푸터 영역 -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <h3>제이허브</h3>
          <p>맞춤형 카드 제작 전문 업체</p>
        </div>
        <div class="footer-links">
          <h4>바로가기</h4>
          <ul>
            <li><a href="#about">회사소개</a></li>
            <li><a href="#products">제품안내</a></li>
            <li><a href="#order">주문하기</a></li>
            <li><a href="#contact">고객센터</a></li>
          </ul>
        </div>
        <div class="footer-contact">
          <h4>연락처</h4>
          <p><i class="fas fa-phone"></i> 02-123-4567</p>
          <p><i class="fas fa-envelope"></i> info@jhub.co.kr</p>
          <p><i class="fas fa-map-marker-alt"></i> 서울특별시 강남구 테헤란로 123</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2023 제이허브. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- 로그인 모달 -->
  <div id="login-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="toggleLoginModal()">&times;</span>
      <h2>로그인</h2>
      <form id="login-form">
        <div class="form-group">
          <label for="login-email">이메일</label>
          <input type="email" id="login-email" name="email" required>
        </div>
        <div class="form-group">
          <label for="login-password">비밀번호</label>
          <input type="password" id="login-password" name="password" required>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-block">로그인</button>
        </div>
        <div class="form-footer">
          <p>계정이 없으신가요? <a href="#" onclick="toggleModals('login', 'register')">회원가입</a></p>
        </div>
      </form>
    </div>
  </div>

  <!-- 회원가입 모달 -->
  <div id="register-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="toggleRegisterModal()">&times;</span>
      <h2>회원가입</h2>
      
      <!-- 회원 유형 선택 -->
      <div class="member-type-selection">
        <label class="radio-container">
          <input type="radio" name="member-type" value="personal" checked>
          <span class="radio-label">개인회원</span>
        </label>
        <label class="radio-container">
          <input type="radio" name="member-type" value="business">
          <span class="radio-label">사업자회원</span>
        </label>
      </div>
      
      <form id="register-form-personal" class="register-form">
        <!-- 개인회원 가입 폼 -->
        <div class="form-row">
          <div class="form-group">
            <label for="personal-name">이름</label>
            <input type="text" id="personal-name" name="name" required>
          </div>
          <div class="form-group">
            <label for="personal-phone">연락처</label>
            <input type="tel" id="personal-phone" name="phone" placeholder="010-0000-0000" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="personal-email">이메일</label>
          <input type="email" id="personal-email" name="email" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="personal-password">비밀번호</label>
            <input type="password" id="personal-password" name="password" required>
          </div>
          <div class="form-group">
            <label for="personal-password-confirm">비밀번호 확인</label>
            <input type="password" id="personal-password-confirm" name="password-confirm" required>
          </div>
        </div>
        
        <!-- 주소 입력 -->
        <div class="form-group">
          <label for="personal-postcode">우편번호</label>
          <div class="input-with-button">
            <input type="text" id="personal-postcode" name="postcode" readonly>
            <button type="button" class="btn btn-sm" onclick="searchAddress('personal')">주소 검색</button>
          </div>
        </div>
        <div class="form-group">
          <label for="personal-address">주소</label>
          <input type="text" id="personal-address" name="address" readonly>
        </div>
        <div class="form-group">
          <label for="personal-address-detail">상세주소</label>
          <input type="text" id="personal-address-detail" name="address-detail">
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-block">가입하기</button>
        </div>
      </form>
      
      <form id="register-form-business" class="register-form hidden">
        <!-- 사업자회원 가입 폼 -->
        <div class="form-row">
          <div class="form-group">
            <label for="business-name">기업명</label>
            <input type="text" id="business-name" name="business-name" required>
          </div>
          <div class="form-group">
            <label for="business-ceo">대표자명</label>
            <input type="text" id="business-ceo" name="business-ceo" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="business-number">사업자번호</label>
          <input type="text" id="business-number" name="business-number" placeholder="000-00-00000" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="business-type">업태</label>
            <input type="text" id="business-type" name="business-type" required>
          </div>
          <div class="form-group">
            <label for="business-category">종목</label>
            <input type="text" id="business-category" name="business-category" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="business-email">계산서발행이메일</label>
            <input type="email" id="business-email" name="business-email" required>
          </div>
          <div class="form-group">
            <label for="business-contact-email">로그인 이메일</label>
            <input type="email" id="business-contact-email" name="contact-email" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="business-password">비밀번호</label>
            <input type="password" id="business-password" name="password" required>
          </div>
          <div class="form-group">
            <label for="business-password-confirm">비밀번호 확인</label>
            <input type="password" id="business-password-confirm" name="password-confirm" required>
          </div>
        </div>
        
        <!-- 주소 입력 -->
        <div class="form-group">
          <label for="business-postcode">우편번호</label>
          <div class="input-with-button">
            <input type="text" id="business-postcode" name="postcode" readonly>
            <button type="button" class="btn btn-sm" onclick="searchAddress('business')">주소 검색</button>
          </div>
        </div>
        <div class="form-group">
          <label for="business-address">주소</label>
          <input type="text" id="business-address" name="address" readonly>
        </div>
        <div class="form-group">
          <label for="business-address-detail">상세주소</label>
          <input type="text" id="business-address-detail" name="address-detail">
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-block">가입하기</button>
        </div>
      </form>
      
      <div class="form-footer">
        <p>이미 계정이 있으신가요? <a href="#" onclick="toggleModals('register', 'login')">로그인</a></p>
      </div>
    </div>
  </div>

  <!-- 자바스크립트 -->
  <script>
    // 로그인 상태 관리 (임시 - 실제로는 서버 연동 필요)
    let isLoggedIn = false;
    let currentUser = null;
    
    // 페이지 로드 시 실행
    document.addEventListener('DOMContentLoaded', function() {
      // 로컬 스토리지에서 로그인 정보 확인
      checkLoginStatus();
      
      // 회원 유형에 따른 폼 전환
      const memberTypeRadios = document.querySelectorAll('input[name="member-type"]');
      memberTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          toggleMemberTypeForms(this.value);
        });
      });
      
      // 로그인 폼 제출 처리
      document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();
        handleLogin();
      });
      
      // 개인회원 가입 폼 제출 처리
      document.getElementById('register-form-personal').addEventListener('submit', function(e) {
        e.preventDefault();
        handleRegister('personal');
      });
      
      // 사업자회원 가입 폼 제출 처리
      document.getElementById('register-form-business').addEventListener('submit', function(e) {
        e.preventDefault();
        handleRegister('business');
      });
      
      // 주문 폼 제출 처리
      document.getElementById('order-form').addEventListener('submit', function(e) {
        e.preventDefault();
        handleOrder();
      });
    });
    
    // 로그인 상태 확인
    function checkLoginStatus() {
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        isLoggedIn = true;
        updateUIForLoggedInUser();
      } else {
        updateUIForLoggedOutUser();
      }
    }
    
    // 로그인 처리
    function handleLogin() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      // 실제로는 서버에 인증 요청을 보내야 함
      // 여기서는 간단한 시뮬레이션만 구현
      
      // 임시 사용자 정보 (실제로는 서버에서 받아와야 함)
      // 회원번호 생성 (실제로는 서버에서 가져와야 함)
      const memberNumber = 'JH' + Math.floor(10000000 + Math.random() * 90000000);
      
      currentUser = {
        email: email,
        name: '사용자',
        type: 'personal', // 또는 'business'
        memberNumber: memberNumber
      };
      
      // 로컬 스토리지에 저장 (실제로는 세션/토큰 관리 필요)
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      isLoggedIn = true;
      
      // UI 업데이트
      updateUIForLoggedInUser();
      
      // 모달 닫기
      toggleLoginModal();
      
      // 성공 메시지
      alert('로그인되었습니다.');
    }
    
    // 회원가입 처리
    function handleRegister(type) {
      // 실제로는 서버에 회원가입 요청을 보내야 함
      // 여기서는 간단한 시뮬레이션만 구현
      
      // 회원번호 생성 (현재 시간 기반 - 실제로는 서버에서 고유한 번호 생성)
      const memberNumber = 'JH' + new Date().getTime().toString().slice(-8);
      
      if (type === 'personal') {
        const name = document.getElementById('personal-name').value;
        const email = document.getElementById('personal-email').value;
        const password = document.getElementById('personal-password').value;
        const passwordConfirm = document.getElementById('personal-password-confirm').value;
        
        // 비밀번호 확인
        if (password !== passwordConfirm) {
          alert('비밀번호가 일치하지 않습니다.');
          return;
        }
        
        // 임시 사용자 정보 생성 (실제로는 서버에서 처리)
        currentUser = {
          name: name,
          email: email,
          type: 'personal',
          memberNumber: memberNumber
        };
      } else {
        const businessName = document.getElementById('business-name').value;
        const ceoName = document.getElementById('business-ceo').value;
        const email = document.getElementById('business-contact-email').value;
        const password = document.getElementById('business-password').value;
        const passwordConfirm = document.getElementById('business-password-confirm').value;
        
        // 비밀번호 확인
        if (password !== passwordConfirm) {
          alert('비밀번호가 일치하지 않습니다.');
          return;
        }
        
        // 임시 사용자 정보 생성 (실제로는 서버에서 처리)
        currentUser = {
          name: businessName,
          ceoName: ceoName,
          email: email,
          type: 'business',
          memberNumber: memberNumber
        };
      }
      
      // 로컬 스토리지에 저장 (실제로는 서버에 저장)
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      isLoggedIn = true;
      
      // UI 업데이트
      updateUIForLoggedInUser();
      
      // 모달 닫기
      toggleRegisterModal();
      
      // 성공 메시지
      alert('회원가입이 완료되었습니다. 회원번호: ' + memberNumber);
    }
    
    // 로그아웃 처리
    function handleLogout() {
      // 로컬 스토리지에서 사용자 정보 삭제
      localStorage.removeItem('currentUser');
      isLoggedIn = false;
      currentUser = null;
      
      // UI 업데이트
      updateUIForLoggedOutUser();
      
      // 성공 메시지
      alert('로그아웃되었습니다.');
    }
    
    // 로그인 상태에 따른 UI 업데이트
    function updateUIForLoggedInUser() {
      // 헤더 버튼 변경
      const authButtons = document.getElementById('auth-buttons');
      authButtons.innerHTML = `
        <div class="user-info">
          <span class="user-greeting">안녕하세요, ${currentUser.name}님</span>
          <span class="member-number">회원번호: ${currentUser.memberNumber}</span>
        </div>
        <a href="#" class="btn btn-outline" onclick="handleLogout()">로그아웃</a>
      `;
      
      // 주문 폼 표시
      document.getElementById('order-login-required').classList.add('hidden');
      document.getElementById('order-form').classList.remove('hidden');
      
      // 파일 업로드 메뉴 표시 (실제로는 더 복잡한 권한 관리 필요)
      // 여기서는 간단히 구현
    }
    
    // 로그아웃 상태에 따른 UI 업데이트
    function updateUIForLoggedOutUser() {
      // 헤더 버튼 변경
      const authButtons = document.getElementById('auth-buttons');
      authButtons.innerHTML = `
        <a href="#" class="btn btn-outline" id="login-btn" onclick="toggleLoginModal()">로그인</a>
        <a href="#" class="btn" id="register-btn" onclick="toggleRegisterModal()">회원가입</a>
      `;
      
      // 주문 폼 숨김
      document.getElementById('order-login-required').classList.remove('hidden');
      document.getElementById('order-form').classList.add('hidden');
    }
    
    // 재질에 따른 옵션 업데이트
    function updateOptions() {
      const material = document.getElementById('material').value;
      const optionSelect = document.getElementById('option');
      
      // 옵션 초기화
      optionSelect.innerHTML = '<option value="" disabled selected>옵션을 선택하세요</option>';
      
      // 재질에 따른 옵션 추가
      if (material === 'pvc') {
        optionSelect.innerHTML += '<option value="white">화이트</option>';
      } else if (material === 'rf') {
        optionSelect.innerHTML += '<option value="mf1356">MF13.56</option>';
        optionSelect.innerHTML += '<option value="em125">EM125</option>';
      }
    }
    
    // 비규격 사이즈 입력 필드 토글
    function toggleCustomSize() {
      const sizeSelect = document.getElementById('size').value;
      const customSizeGroup = document.getElementById('custom-size-group');
      
      if (sizeSelect === 'custom') {
        customSizeGroup.classList.remove('hidden');
        customSizeGroup.classList.add('show');
        document.getElementById('custom-size').setAttribute('required', 'required');
      } else {
        customSizeGroup.classList.add('hidden');
        customSizeGroup.classList.remove('show');
        document.getElementById('custom-size').removeAttribute('required');
      }
    }
    
    // 주문 처리
    function handleOrder() {
      // 폼 데이터 수집
      const material = document.getElementById('material').value;
      const option = document.getElementById('option').value;
      const size = document.getElementById('size').value;
      const customSize = size === 'custom' ? document.getElementById('custom-size').value : '86*54mm';
      const quantity = document.getElementById('quantity').value;
      
      // 후가공 옵션 수집
      const postProcessElements = document.querySelectorAll('input[name="post-process"]:checked');
      const postProcess = Array.from(postProcessElements).map(el => el.value).join(', ');
      
      const request = document.getElementById('request').value;
      
      // 주문 정보 구성
      const orderData = {
        material: material,
        option: option,
        size: size === 'custom' ? customSize : '86*54mm (표준)',
        quantity: quantity,
        postProcess: postProcess || '없음',
        request: request,
        userEmail: currentUser.email,
        userName: currentUser.name,
        memberNumber: currentUser.memberNumber,
        orderDate: new Date().toISOString()
      };
      
      console.log('주문 데이터:', orderData);
      
      // 구글 시트에 데이터 전송
      sendToGoogleSheet(orderData);
      
      // 폼 초기화
      document.getElementById('order-form').reset();
      document.getElementById('custom-size-group').classList.add('hidden');
    }
    
    // 구글 시트에 데이터 전송
    function sendToGoogleSheet(data) {
      // 구글 스크립트 웹 앱 URL - 새로운 스프레드시트 연동
      // 주의: 아래 URL은 Google Apps Script 웹 앱 URL로 변경해야 합니다.
      // 스프레드시트: https://docs.google.com/spreadsheets/d/1xZBwtQLz4isWO0nl6vctKi_yrlFqTyIC1GyNSsFKANY/edit?gid=0#gid=0
      const scriptURL = 'https://script.google.com/macros/s/AKfycbxKL-F8PBl_33hQKtgXpOz0CaXMTMoS3W99C0f8PkQjTD7SnnTqOc3L5cYjCtxXHAbY/exec';
      
      // FormData 객체 생성
      const formData = new FormData();
      
      // 데이터를 FormData에 추가
      Object.keys(data).forEach(key => {
        formData.append(key, data[key]);
      });
      
      // 로딩 표시
      const orderButton = document.querySelector('#order-form button[type="submit"]');
      const originalButtonText = orderButton.innerHTML;
      orderButton.innerHTML = '처리 중...';
      orderButton.disabled = true;
      
      // fetch API를 사용하여 데이터 전송
      fetch(scriptURL, {
        method: 'POST',
        mode: 'cors',
        headers: {
          'Accept': 'application/json'
        },
        body: formData
      })
      .then(response => {
        // 버튼 상태 복원
        orderButton.innerHTML = originalButtonText;
        orderButton.disabled = false;
        
        if (response.ok) {
          alert('주문이 성공적으로 접수되었습니다. 감사합니다!');
          return response.json();
        }
        throw new Error('네트워크 응답이 정상이 아닙니다.');
      })
      .then(data => {
        console.log('성공:', data);
      })
      .catch(error => {
        // 버튼 상태 복원
        orderButton.innerHTML = originalButtonText;
        orderButton.disabled = false;
        
        console.error('오류:', error);
        alert('오류가 발생했습니다. 다시 시도해주세요.');
      });
    }
    
    // 구글 폼 열기
    function openGoogleForm() {
      // 구글 폼 URL - 실제 사용 중인 URL
      const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLScTUaPmf1xKtANONwJsIf6CnYkmZXYjyf7JOiyRy_xO96P63A/viewform?usp=header';
      
      // 현재 주문 정보를 URL 파라미터로 전달
      let formUrl = googleFormUrl;
      
      try {
        // 현재 선택된 정보 가져오기
        const material = document.getElementById('material').value;
        const option = document.getElementById('option').value;
        
        // 회원 정보 추가
        if (isLoggedIn && currentUser) {
          // 회원번호 파라미터 추가 (구글 폼의 필드 ID를 확인하여 적용)
          // 아래 entry.xxxxx 부분은 실제 구글 폼의 회원번호 필드 ID로 변경해야 함
          formUrl += `&entry.xxxxx=${encodeURIComponent(currentUser.memberNumber)}`;
          
          // 이름 파라미터 추가 (선택적)
          // formUrl += `&entry.yyyyy=${encodeURIComponent(currentUser.name)}`;
          
          console.log('구글 폼에 회원번호 전달:', currentUser.memberNumber);
        }
        
        // 주문 정보 파라미터 추가 (선택적)
        // formUrl += `&entry.zzzzz=${encodeURIComponent(material)}`;
        // formUrl += `&entry.wwwww=${encodeURIComponent(option)}`;
      } catch (e) {
        console.error('파라미터 추가 중 오류:', e);
      }
      
      // 새 창에서 구글 폼 열기
      window.open(formUrl, '_blank');
    }
    
    // 로그인 모달 토글
    function toggleLoginModal() {
      const modal = document.getElementById('login-modal');
      modal.classList.toggle('show');
    }
    
    // 회원가입 모달 토글
    function toggleRegisterModal() {
      const modal = document.getElementById('register-modal');
      modal.classList.toggle('show');
    }
    
    // 모달 전환
    function toggleModals(closeModalId, openModalId) {
      document.getElementById(`${closeModalId}-modal`).classList.remove('show');
      document.getElementById(`${openModalId}-modal`).classList.add('show');
    }
    
    // 회원 유형에 따른 폼 전환
    function toggleMemberTypeForms(type) {
      if (type === 'personal') {
        document.getElementById('register-form-personal').classList.remove('hidden');
        document.getElementById('register-form-business').classList.add('hidden');
      } else {
        document.getElementById('register-form-personal').classList.add('hidden');
        document.getElementById('register-form-business').classList.remove('hidden');
      }
    }
    
    // 다음 주소 API를 사용한 주소 검색
    function searchAddress(type) {
      new daum.Postcode({
        oncomplete: function(data) {
          // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드
          // 도로명 주소의 노출 규칙에 따라 주소를 표시
          let addr = data.roadAddress; // 도로명 주소
          
          // 우편번호와 주소 정보를 해당 필드에 넣기
          document.getElementById(`${type}-postcode`).value = data.zonecode;
          document.getElementById(`${type}-address`).value = addr;
          
          // 커서를 상세주소 필드로 이동
          document.getElementById(`${type}-address-detail`).focus();
        }
      }).open();
    }
  </script>
</body>
</html>
